# 엑셀 파일 통합 웹서비스 SMILE 개발 로드맵

## 개요

이 로드맵은 SMILE 프레임워크(설계 먼저, 최소 기능 개발, 점진적 확장, 로그 기반 학습, 환경 표준화)를 적용하여 엑셀 파일 통합 웹서비스를 개발하기 위한 단계별 가이드입니다.

## MVP 정의

최소 기능 제품(MVP)은 다음 기능을 포함합니다:

1. 최대 10개의 엑셀 파일 업로드 및 분석
2. 기본적인 필드 매핑 (수동)
3. 통합 데이터 생성 및 엑셀 파일 다운로드
4. 단일 출력 형식 지원

## 1단계: 기본 프로젝트 설정 및 파일 업로드 (기간: 1-2일)

### 핵심 목표

- 작동하는 Next.js 프로젝트 설정
- 파일 업로드 UI 및 기능 구현

### 작업 항목

1. Next.js 프로젝트 생성 및 기본 구조 설정
2. 의존성 정확한 버전으로 설치 (package.json 세팅)
3. 기본 레이아웃 및 네비게이션 구현
4. 파일 업로드 컴포넌트 구현 (react-dropzone)
5. 업로드된 파일 목록 표시 UI

### 완료 기준

- [ ] Next.js 프로젝트가 로컬에서 실행됨
- [ ] 파일 업로드 UI가 작동함
- [ ] 최대 10개 파일만 업로드 가능한 제한 구현
- [ ] 지원되는 파일 형식(.xlsx, .xls, .csv) 검증 기능
- [ ] 업로드된 파일 목록이 표시됨

### 예상 문제 및 대처 방법

- **의존성 충돌**: `fix-deps.sh` 스크립트로 해결
- **파일 크기 제한**: 프론트엔드에서 10MB 제한 설정
- **형식 검증 문제**: 파일 확장자 및 MIME 타입 이중 검증

## 2단계: 엑셀 파일 분석 및 데이터 추출 (기간: 2-3일)

### 핵심 목표

- 업로드된 엑셀 파일에서 데이터 추출
- 시트 및 헤더 정보 분석

### 작업 항목

1. SheetJS/xlsx 라이브러리 통합
2. 파일 읽기 및 파싱 로직 구현
3. 시트 목록 및 선택 UI 구현
4. 헤더 정보 추출 및 표시
5. 시트 데이터 미리보기 테이블 구현

### 완료 기준

- [ ] 업로드된 엑셀 파일에서 시트 목록 추출
- [ ] 시트별 헤더 정보 추출 및 표시
- [ ] 시트 데이터 미리보기 표시 (첫 10행)
- [ ] 로컬 스토리지에 파싱된 데이터 저장

### 예상 문제 및 대처 방법

- **메모리 부족**: 대용량 파일 처리 시 청크 단위로 분할
- **빈 셀/행 처리**: null 체크 및 방어적 프로그래밍
- **복잡한 헤더 구조**: 헤더 추출 알고리즘 단계별 검증

## 3단계: 필드 매핑 인터페이스 (기간: 2-3일)

### 핵심 목표

- 사용자가 서로 다른 파일의 필드를 매핑할 수 있는 인터페이스 구현

### 작업 항목

1. 필드 매핑 UI 컴포넌트 구현
2. 드래그 앤 드롭 매핑 기능 구현
3. 매핑 정보 저장 및 로드 기능
4. 유사 필드 자동 제안 기능 (기본적인 수준)

### 완료 기준

- [ ] 두 파일 간 필드 매핑 UI 구현
- [ ] 매핑 정보 로컬 스토리지 저장
- [ ] 기본적인 필드 유사도 검사 및 제안 기능

### 예상 문제 및 대처 방법

- **UI 복잡성**: 단순한 드롭다운 기반 매핑으로 시작
- **상태 관리 복잡성**: Context API 사용하여 관리

## 4단계: 데이터 통합 및 미리보기 (기간: 1-2일)

### 핵심 목표

- 매핑 정보를 기반으로 데이터 통합
- 통합 데이터 미리보기 구현

### 작업 항목

1. 매핑 정보 기반 데이터 통합 로직 구현
2. 통합 데이터 미리보기 UI 구현
3. 통합 데이터 유효성 검사
4. 레코드 수 카운팅 및 검증

### 완료 기준

- [ ] 매핑된 필드를 기준으로 데이터 통합 구현
- [ ] 통합 데이터를 테이블로 미리보기
- [ ] 원본 파일과 통합 후 레코드 수 검증
- [ ] 필수 필드 값 누락 감지 및 표시

### 예상 문제 및 대처 방법

- **데이터 유형 불일치**: 자동 타입 변환 로직 구현
- **누락된 데이터**: null/undefined 값 처리 로직

## 5단계: 파일 내보내기 및 기본 출력 (기간: 1-2일)

### 핵심 목표

- 통합 데이터를 엑셀 파일로 내보내기
- 기본적인 출력 형식 적용

### 작업 항목

1. 통합 데이터를 xlsx 형식으로 변환
2. 파일 다운로드 기능 구현
3. 기본 헤더 스타일 적용
4. 간단한 A4 인쇄 미리보기

### 완료 기준

- [ ] 통합 데이터를 엑셀 파일로 변환
- [ ] 파일 다운로드 기능 구현
- [ ] 기본 스타일 적용 (헤더 굵게, 테두리 등)
- [ ] A4 인쇄 미리보기 기능

### 예상 문제 및 대처 방법

- **스타일 적용 문제**: 기본 스타일로 제한하여 시작
- **큰 데이터셋 처리**: 청크 단위로 파일 생성

## 6단계: 최종 테스트 및 버그 수정 (기간: 1-2일)

### 핵심 목표

- 전체 워크플로우 테스트 및 버그 수정
- 사용자 경험 개선

### 작업 항목

1. 전체 워크플로우 테스트
2. 발견된 버그 수정
3. 오류 메시지 명확화
4. 작업 진행률 표시 개선

### 완료 기준

- [ ] 전체 워크플로우 오류 없이 작동
- [ ] 명확한 오류 메시지 및 사용자 가이드 제공
- [ ] 로딩 상태 및 진행률 표시
- [ ] 브라우저 호환성 테스트 (Chrome, Firefox, Edge)

### 예상 문제 및 대처 방법

- **예상치 못한 오류**: 사용자 친화적 오류 처리
- **브라우저 호환성**: 핵심 기능 위주로 우선 확인

## 추가 확장 기능 (MVP 이후)

### 1. 소셜 로그인 및 사용자 관리

- NextAuth.js 통합
- Google, Naver, Kakao 로그인 구현
- 사용자별 데이터 관리

### 2. 고급 필드 매핑 및 템플릿

- 필드 매핑 규칙 저장 및 관리
- 다양한 출력 템플릿 지원
- 템플릿 커스터마이징 기능

### 3. 대용량 파일 처리

- 10개 이상 파일 통합 지원
- Web Worker를 활용한 백그라운드 처리
- 진행 상황 실시간 표시

### 4. 데이터베이스 연동

- Supabase 연동
- 사용자 데이터 및 설정 저장
- 작업 이력 관리

## 개발 팁 및 모범 사례

### 디버깅 전략

1. `console.log`를 활용하여 주요 데이터 흐름 추적
2. 브라우저 개발자 도구 Network 탭으로 API 호출 확인
3. React DevTools로 컴포넌트 상태 확인
4. logger 유틸리티 활용하여 일관된 로깅

### 성능 최적화

1. 큰 파일 처리 시 청크 단위로 분할
2. 불필요한 리렌더링 방지를 위한 메모이제이션
3. 이미지 및 정적 자산 최적화

### 코드 품질 유지

1. 일관된 코딩 스타일 유지 (ESLint, Prettier)
2. 작은 단위로 커밋하고 명확한 커밋 메시지 작성
3. 중복 코드 제거 및 재사용 가능한 유틸리티 함수 작성
