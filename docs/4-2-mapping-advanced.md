# 4-2단계: 매핑 기능 개선 및 자동화

## 목표

4-1단계에서 구현한 기본 매핑 UI와 구조를 바탕으로, 사용자 경험을 향상시키는 드래그 앤 드롭 기능과 자동 매핑 기능을 구현합니다.

## 세부 작업 내용

### 1. 유사 필드명 자동 감지 기능 구현

- `lib/similarity.ts` 유틸리티 파일 생성
- 문자열 유사도 계산 함수 구현 (Levenshtein 거리, 자카드 유사도 등)

  ```typescript
  // 레벤슈타인 거리 계산 함수 예시
  function levenshteinDistance(a: string, b: string): number {
    // 구현 내용
  }

  // 자카드 유사도 계산 함수 예시
  function jaccardSimilarity(a: string, b: string): number {
    // 구현 내용
  }

  // 필드명 정규화 함수 (공백, 특수문자 제거, 소문자 변환 등)
  function normalizeFieldName(fieldName: string): string {
    // 구현 내용
  }
  ```

- 필드명 유사도 기반 자동 매핑 제안 함수 구현
- 자동 매핑 버튼 및 기능 UI 구현

### 2. 드래그 앤 드롭 방식의 매핑 UI 개선

- `react-beautiful-dnd` 또는 `@hello-pangea/dnd` 라이브러리 설치
- 드래그 가능한 소스 필드 컴포넌트 구현
- 드롭 영역으로 사용할 타겟 필드 컴포넌트 구현
- 드래그 앤 드롭 이벤트 핸들러 구현
- 드래그 시 시각적 피드백 (강조 효과, 드롭 가능 영역 표시 등) 구현
- 모바일 친화적인 터치 이벤트 대응

### 3. 매핑 미리보기 테이블 기본 구현

- `src/components/mapping/MappingPreview.tsx` 컴포넌트 생성
- 현재 매핑 설정에 따른 데이터 미리보기 테이블 구현
- 페이지네이션 기능 구현 (대용량 데이터 처리)
- 미리보기 데이터 로드 및 변환 함수 구현
- 테이블 헤더 및 셀 스타일 구현

### 4. 필드 유형 불일치 감지 기능 구현

- 필드 데이터 유형 분석 함수 강화 (숫자, 날짜, 문자열 등 정확한 감지)
- 매핑된 소스 필드와 타겟 필드 간의 데이터 유형 비교 함수 구현
- 유형 불일치 시 경고 표시 UI 구현
- 데이터 유형 변환 옵션 제공 (예: 날짜 형식 지정, 숫자 포맷 설정 등)
- 유형 불일치 해결 가이드 제공

## 구현 시 고려사항

- 자동 매핑 기능은 정확도와 함께 사용자가 쉽게 수정할 수 있는 UI 제공
- 드래그 앤 드롭 기능은 직관적이고 반응성이 좋게 구현
- 매핑 미리보기는 성능을 고려하여 적절한 데이터 샘플링 사용
- 필드 유형 감지 및 변환은 다양한 케이스(국제 날짜 형식, 통화 등)를 고려

## 테스트 항목

- 유사 필드명 자동 감지 정확도 검증
- 드래그 앤 드롭 기능 사용성 테스트
- 대용량 데이터 미리보기 성능 테스트
- 다양한 필드 유형에 대한 불일치 감지 및 경고 기능 확인

## 다음 단계 준비

- 이 단계에서 구현한 기능을 바탕으로 4-3단계에서는 매핑 설정의 유효성 검증과 고급 기능을 구현할 예정
- 필수 필드 지정 및 검증 메커니즘 설계
- 매핑 설정 내보내기/가져오기 형식 설계
